<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        function createElemnt (tag, id, type, innerText, innerHtml) {
            const elem = document.createElement(tag);
            elem.type = type;
            elem.id = id;
            elem.innerHTML = innerHtml;
            if (type === 'button') {
                elem.value = innerText;
            }
            return elem;
        }

        document.body.appendChild(createElemnt('input', 'num', 'text'));
        document.body.appendChild(createElemnt('input', 'show', 'button', 'Отправить'));
        document.body.appendChild(createElemnt('div', 'container', null, null, null));

        function generateColor() {
            return '#' + Math.floor(Math.random()*16777218).toString(16);
        }

        function addRects () {
            const container = document.querySelector('#container');
            const num = parseInt(document.querySelector("#num").value);

            if (Number(num) !== num && num < 0 || num > 30) {
                document.body.appendChild(createElemnt('p', null, null, null, 'Введите число от 0 до 30'));
            } else {
                for (let i = 0; i < num; i++) {
                    const row = container.appendChild(createElemnt('div', `row${i}`, null, null, null));
                    row.style.display = 'flex';
                    for (let j = 0; j < num; j++) {
                        const col = row.appendChild(createElemnt('div', `colr${i}`, null, null, null));
                        col.style.backgroundColor = generateColor();
                        col.style.width = '50px';
                        col.style.height = '20px';
                        col.style.margin = '5px';
                    }
                }
            }
        }

        document.getElementById('show').addEventListener('click', addRects);
    </script>
</body>
</html>